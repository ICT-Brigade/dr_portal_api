{% extends "base.html" %}
{% block content %}
{% load static %}
{% include "campaign_detail_modal.html" %}

<script src="{% static 'js/campaign_list.js' %}" defer></script>
  <div class="d-flex flex-column position-relative main-content">
    {% include "utility_bar.html" %}
    
    {% if posts_list %}
      <div class="listview-container">
        <ul class="container-sm d-grid gap-4">
          {% for post in posts_list %}
          <li class="row">
            <div
              class="d-flex flex-row card p-3"
              data-bs-toggle="modal"
              data-bs-target="#campaign-dtl-modal"
              id={{post.id}}>
              <div class="col-4">
                {% if post.image_link == "/default.png"  or not post.image_link %}
                  <img class="landscape" src="{{request.scheme}}://{{request.get_host}}{{static_url}}img/default.png" alt="Image Unavailable">
                {% else %}
                  <img class="landscape" src="{{ post.image_link }}" alt="Image Unavailable">
                {% endif %}
              </div>
              <div class="col-6 text-wrap mx-4">
                <div>
                  <h4 class="card-title bold">{{ post.beneficiary_location }}{{ post.source_account }}</h4>
                  {%if post.campaign_type %}
                    <span class="px-2 campaign-modal-tag">{{post.campaign_type.value|title}}</span>
                  {% endif %}
                </div>
                <div>
                  <p>{{ post.description }}</p>
                </div>
                <a class="btn btn-primary dr-btn" href="{{post.link}}">DONATE</a>
              </div>
            </div>
          </li>
          {% endfor %}
      </div>
      </ul>
    {% else %}
      <p>No posts are available.</p>
    {% endif %}
  </div>
{%endblock content%}
